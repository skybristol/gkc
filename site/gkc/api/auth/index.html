
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data Distillery - A framework for data distillation toward the Global Knowledge Commons">
      
      
      
        <link rel="canonical" href="https://datadistillery.org/gkc/api/auth/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../mash/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Authentication - Data Distillery</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#authentication-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Data Distillery" class="md-header__button md-logo" aria-label="Data Distillery" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Distillery
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Authentication
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/skybristol/gkc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    skybristol/gkc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Data Distillery" class="md-nav__button md-logo" aria-label="Data Distillery" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Data Distillery
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/skybristol/gkc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    skybristol/gkc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Curation Narratives
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Curation Narratives
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tribes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tribal Governments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SpiritSafe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/profile-loading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profile Loading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/spiritsafe-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/validation-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    GKC Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    GKC Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Background
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup and Orientation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Distillery Workflow
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Distillery Workflow
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shipping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shipping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" checked>
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticationerror" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthenticationError
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthenticationError">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthenticationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthenticationError
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authbase" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthBase
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthBase" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthBase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthBase.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthBase.is_authenticated" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_authenticated
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikiverseauth" class="md-nav__link">
    <span class="md-ellipsis">
      
        WikiverseAuth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiverseAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth" class="md-nav__link">
    <span class="md-ellipsis">
      
        WikiverseAuth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--authenticate-to-wikidata-default" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authenticate to Wikidata (default)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--direct-parameters-bot-password-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direct parameters (bot password format)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--custom-mediawiki-instance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom MediaWiki instance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--important-use-authsession-for-api-requests-to-maintain-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        IMPORTANT: Use auth.session for API requests to maintain authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_account_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_account_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_bot_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_bot_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_csrf_token" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_csrf_token
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_csrf_token">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_csrf_token--use-token-with-authsession-not-a-new-requests-call" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use token with auth.session (not a new requests call)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.is_logged_in" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_logged_in
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.login" class="md-nav__link">
    <span class="md-ellipsis">
      
        login
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.logout" class="md-nav__link">
    <span class="md-ellipsis">
      
        logout
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="logout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.logout--do-some-work" class="md-nav__link">
    <span class="md-ellipsis">
      
        ... do some work ...
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.test_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_authentication
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openstreetmapauth" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenStreetMapAuth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenStreetMapAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenStreetMapAuth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth--using-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using environment variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth--direct-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direct parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth--interactive-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interactive prompt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticate-to-wikidata-using-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authenticate to Wikidata using environment variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authenticate-to-testwikidataorg-for-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authenticate to test.wikidata.org for testing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-between-wikimedia-projects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Switch between Wikimedia projects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-authentication-session-for-api-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use authentication session for API requests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-account-and-bot-names" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extract account and bot names
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#missing-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Missing credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invalid-bot-password-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Invalid bot password credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#missing-csrf-token-not-logged-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Missing CSRF token (not logged in)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#available-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Available Endpoints
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mash_formatters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash Formatters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spirit_safe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ShEx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shipper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shipper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sparql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SPARQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Command Line Interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Command Line Interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/mash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/shex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ShEx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Utilities and Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CI_CD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../RELEASE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticationerror" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthenticationError
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthenticationError">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthenticationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthenticationError
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authbase" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthBase
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthBase" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthBase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthBase.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.AuthBase.is_authenticated" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_authenticated
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikiverseauth" class="md-nav__link">
    <span class="md-ellipsis">
      
        WikiverseAuth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiverseAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth" class="md-nav__link">
    <span class="md-ellipsis">
      
        WikiverseAuth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--authenticate-to-wikidata-default" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authenticate to Wikidata (default)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--direct-parameters-bot-password-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direct parameters (bot password format)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--custom-mediawiki-instance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom MediaWiki instance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth--important-use-authsession-for-api-requests-to-maintain-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        IMPORTANT: Use auth.session for API requests to maintain authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_account_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_account_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_bot_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_bot_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_csrf_token" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_csrf_token
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_csrf_token">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.get_csrf_token--use-token-with-authsession-not-a-new-requests-call" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use token with auth.session (not a new requests call)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.is_logged_in" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_logged_in
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.login" class="md-nav__link">
    <span class="md-ellipsis">
      
        login
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.logout" class="md-nav__link">
    <span class="md-ellipsis">
      
        logout
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="logout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.logout--do-some-work" class="md-nav__link">
    <span class="md-ellipsis">
      
        ... do some work ...
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.WikiverseAuth.test_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_authentication
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openstreetmapauth" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenStreetMapAuth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenStreetMapAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenStreetMapAuth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth--using-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using environment variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth--direct-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direct parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth--interactive-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interactive prompt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.auth.OpenStreetMapAuth.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticate-to-wikidata-using-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authenticate to Wikidata using environment variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authenticate-to-testwikidataorg-for-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authenticate to test.wikidata.org for testing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-between-wikimedia-projects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Switch between Wikimedia projects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-authentication-session-for-api-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use authentication session for API requests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-account-and-bot-names" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extract account and bot names
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#missing-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Missing credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invalid-bot-password-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Invalid bot password credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#missing-csrf-token-not-logged-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Missing CSRF token (not logged in)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#available-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Available Endpoints
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="authentication-api">Authentication API</h1>
<h2 id="overview">Overview</h2>
<p>The Authentication module provides unified credential management for Global Knowledge Commons services. Currently it supports Wikimedia projects (Wikidata, Wikipedia, Wikimedia Commons) using bot password authentication, with planned support for OpenStreetMap and other external services.</p>
<p><strong>Current implementations:</strong> Wikimedia projects (Wikidata production, test instance, Wikipedia, Commons); OpenStreetMap auth framework<br />
<strong>Future implementations:</strong> OpenStreetMap API authentication, additional service integrations</p>
<h2 id="quick-start">Quick Start</h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span>

<span class="c1"># Authenticate to Wikidata using bot password</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyUsername@MyBot&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;abc123def456ghi789&quot;</span>
<span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Logged in as: </span><span class="si">{</span><span class="n">auth</span><span class="o">.</span><span class="n">get_account_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="classes">Classes</h2>
<h3 id="authenticationerror">AuthenticationError</h3>


<div class="doc doc-object doc-class">



<a id="gkc.auth.AuthenticationError"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Raised when authentication fails.</p>






              <details class="quote">
                <summary>Source code in <code>gkc/auth.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AuthenticationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when authentication fails.&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div><h3 id="authbase">AuthBase</h3>


<div class="doc doc-object doc-class">



<a id="gkc.auth.AuthBase"></a>
    <div class="doc doc-contents first">


        <p>Base class for authentication.</p>






              <details class="quote">
                <summary>Source code in <code>gkc/auth.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AuthBase</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for authentication.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize authentication.</span>

<span class="sd">        Args:</span>
<span class="sd">            username: Username for authentication. If not provided, will try to</span>
<span class="sd">                     read from environment variable.</span>
<span class="sd">            password: Password for authentication. If not provided, will try to</span>
<span class="sd">                     read from environment variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if credentials are available.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="gkc.auth.AuthBase.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize authentication.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>username</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Username for authentication. If not provided, will try to
     read from environment variable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>password</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Password for authentication. If not provided, will try to
     read from environment variable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize authentication.</span>

<span class="sd">    Args:</span>
<span class="sd">        username: Username for authentication. If not provided, will try to</span>
<span class="sd">                 read from environment variable.</span>
<span class="sd">        password: Password for authentication. If not provided, will try to</span>
<span class="sd">                 read from environment variable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.AuthBase.is_authenticated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_authenticated</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if credentials are available.</p>

            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if credentials are available.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="wikiverseauth">WikiverseAuth</h3>


<div class="doc doc-object doc-class">



<a id="gkc.auth.WikiverseAuth"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gkc.auth.AuthBase" href="#gkc.auth.AuthBase">AuthBase</a></code></p>


        <p>Authentication for Wikimedia projects (Wikidata, Wikipedia, Wikimedia Commons).</p>
<p>Designed for bot accounts using bot passwords. The same credentials work
across all Wikimedia projects due to Single User Login (SUL).</p>
<p>Supports both default Wikimedia instances and custom MediaWiki installations.</p>
<p>Credentials can be provided in three ways (in order of precedence):
1. Direct parameters
2. Environment variables (WIKIVERSE_USERNAME, WIKIVERSE_PASSWORD, WIKIVERSE_API_URL)
3. Interactive prompt</p>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<h4 id="gkc.auth.WikiverseAuth--authenticate-to-wikidata-default">Authenticate to Wikidata (default)</h4>
<p>auth = WikiverseAuth()
auth.login()</p>
<h4 id="gkc.auth.WikiverseAuth--direct-parameters-bot-password-format">Direct parameters (bot password format)</h4>
<p>auth = WikiverseAuth(
...     username="MyUsername@MyBot",
...     password="abc123def456ghi789",
...     api_url="https://www.wikidata.org/w/api.php"
... )
auth.login()</p>
<h4 id="gkc.auth.WikiverseAuth--custom-mediawiki-instance">Custom MediaWiki instance</h4>
<p>auth = WikiverseAuth(
...     username="MyUsername@MyBot",
...     password="abc123def456ghi789",
...     api_url="https://my-wiki.example.com/w/api.php"
... )
auth.login()</p>
<h4 id="gkc.auth.WikiverseAuth--important-use-authsession-for-api-requests-to-maintain-authentication">IMPORTANT: Use auth.session for API requests to maintain authentication</h4>
<p>token = auth.get_csrf_token()
response = auth.session.post(auth.api_url, data={
...     "action": "edit",
...     "title": "Test",
...     "text": "content",
...     "token": token,
...     "format": "json"
... })</p>
</blockquote>
</blockquote>
</blockquote>
</details>





              <details class="quote">
                <summary>Source code in <code>gkc/auth.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WikiverseAuth</span><span class="p">(</span><span class="n">AuthBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Authentication for Wikimedia projects (Wikidata, Wikipedia, Wikimedia Commons).</span>

<span class="sd">    Designed for bot accounts using bot passwords. The same credentials work</span>
<span class="sd">    across all Wikimedia projects due to Single User Login (SUL).</span>

<span class="sd">    Supports both default Wikimedia instances and custom MediaWiki installations.</span>

<span class="sd">    Credentials can be provided in three ways (in order of precedence):</span>
<span class="sd">    1. Direct parameters</span>
<span class="sd">    2. Environment variables (WIKIVERSE_USERNAME, WIKIVERSE_PASSWORD, WIKIVERSE_API_URL)</span>
<span class="sd">    3. Interactive prompt</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # Authenticate to Wikidata (default)</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth()</span>
<span class="sd">        &gt;&gt;&gt; auth.login()</span>

<span class="sd">        &gt;&gt;&gt; # Direct parameters (bot password format)</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(</span>
<span class="sd">        ...     username=&quot;MyUsername@MyBot&quot;,</span>
<span class="sd">        ...     password=&quot;abc123def456ghi789&quot;,</span>
<span class="sd">        ...     api_url=&quot;https://www.wikidata.org/w/api.php&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; auth.login()</span>

<span class="sd">        &gt;&gt;&gt; # Custom MediaWiki instance</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(</span>
<span class="sd">        ...     username=&quot;MyUsername@MyBot&quot;,</span>
<span class="sd">        ...     password=&quot;abc123def456ghi789&quot;,</span>
<span class="sd">        ...     api_url=&quot;https://my-wiki.example.com/w/api.php&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; auth.login()</span>

<span class="sd">        &gt;&gt;&gt; # IMPORTANT: Use auth.session for API requests to maintain authentication</span>
<span class="sd">        &gt;&gt;&gt; token = auth.get_csrf_token()</span>
<span class="sd">        &gt;&gt;&gt; response = auth.session.post(auth.api_url, data={</span>
<span class="sd">        ...     &quot;action&quot;: &quot;edit&quot;,</span>
<span class="sd">        ...     &quot;title&quot;: &quot;Test&quot;,</span>
<span class="sd">        ...     &quot;text&quot;: &quot;content&quot;,</span>
<span class="sd">        ...     &quot;token&quot;: token,</span>
<span class="sd">        ...     &quot;format&quot;: &quot;json&quot;</span>
<span class="sd">        ... })</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">api_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">interactive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Wikiverse authentication for bot accounts.</span>

<span class="sd">        Args:</span>
<span class="sd">            username: Bot password username in format &quot;Username@BotName&quot;.</span>
<span class="sd">                If not provided, reads from WIKIVERSE_USERNAME</span>
<span class="sd">                environment variable.</span>
<span class="sd">            password: Bot password. If not provided, reads from</span>
<span class="sd">                WIKIVERSE_PASSWORD environment variable.</span>
<span class="sd">            api_url: MediaWiki API endpoint URL. If not provided, reads from</span>
<span class="sd">                    WIKIVERSE_API_URL environment variable, or defaults to Wikidata.</span>
<span class="sd">                    Can also use shortcuts: &quot;wikidata&quot;, &quot;wikipedia&quot;, &quot;commons&quot;</span>
<span class="sd">            interactive: If True and credentials are not found, prompt user for input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Try provided parameters first</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">username</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;WIKIVERSE_USERNAME&quot;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">password</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;WIKIVERSE_PASSWORD&quot;</span><span class="p">)</span>
        <span class="n">api_url</span> <span class="o">=</span> <span class="n">api_url</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;WIKIVERSE_API_URL&quot;</span><span class="p">)</span>

        <span class="c1"># If credentials still not available and interactive mode is requested</span>
        <span class="k">if</span> <span class="n">interactive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bot password credentials not found in environment.&quot;</span><span class="p">)</span>
            <span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                <span class="s2">&quot;Enter Wikiverse username (format: Username@BotName): &quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Enter Wikiverse password: &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">api_url</span><span class="p">:</span>
                <span class="n">api_url_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                    <span class="s2">&quot;Enter API URL (or &#39;wikidata&#39;, &#39;wikipedia&#39;, &#39;commons&#39;) &quot;</span>
                    <span class="s2">&quot;[default: wikidata]: &quot;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">api_url</span> <span class="o">=</span> <span class="n">api_url_input</span> <span class="k">if</span> <span class="n">api_url_input</span> <span class="k">else</span> <span class="s2">&quot;wikidata&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

        <span class="c1"># Resolve API URL shortcuts to full URLs</span>
        <span class="k">if</span> <span class="n">api_url</span> <span class="ow">and</span> <span class="n">api_url</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span><span class="p">[</span><span class="n">api_url</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
        <span class="k">elif</span> <span class="n">api_url</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="n">api_url</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Default to Wikidata</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span><span class="p">[</span><span class="s2">&quot;wikidata&quot;</span><span class="p">]</span>

        <span class="c1"># Initialize session for authenticated requests</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;GKC-Python-Client/0.1 (https://github.com/skybristol/gkc)&quot;</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform login to MediaWiki API using bot password credentials.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if login successful, False otherwise.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthenticationError: If login fails with detailed error message.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">            &gt;&gt;&gt; if auth.login():</span>
<span class="sd">            ...     print(&quot;Successfully logged in!&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot login: credentials not provided. &quot;</span>
                <span class="s2">&quot;Please provide username and password.&quot;</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Step 1: Get login token</span>
            <span class="n">token_params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
                <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;tokens&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;login&quot;</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">token_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">token_params</span><span class="p">)</span>
            <span class="n">token_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
            <span class="n">token_data</span> <span class="o">=</span> <span class="n">token_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

            <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">token_data</span> <span class="ow">or</span> <span class="s2">&quot;tokens&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">token_data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to get login token from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="si">}</span><span class="s2">. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Response: </span><span class="si">{</span><span class="n">token_data</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">login_token</span> <span class="o">=</span> <span class="n">token_data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;tokens&quot;</span><span class="p">][</span><span class="s2">&quot;logintoken&quot;</span><span class="p">]</span>

            <span class="c1"># Step 2: Perform login with credentials and token</span>
            <span class="n">login_params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;login&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lgname&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                <span class="s2">&quot;lgpassword&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
                <span class="s2">&quot;lgtoken&quot;</span><span class="p">:</span> <span class="n">login_token</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">login_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">login_params</span><span class="p">)</span>
            <span class="n">login_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
            <span class="n">login_data</span> <span class="o">=</span> <span class="n">login_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

            <span class="c1"># Check login result</span>
            <span class="k">if</span> <span class="s2">&quot;login&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">login_data</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unexpected login response from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="si">}</span><span class="s2">. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Response: </span><span class="si">{</span><span class="n">login_data</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">login_data</span><span class="p">[</span><span class="s2">&quot;login&quot;</span><span class="p">][</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="s2">&quot;Success&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="c1"># Verify we have session cookies</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">cookies</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                        <span class="s2">&quot;Login reported success but no session cookies were set. &quot;</span>
                        <span class="s2">&quot;This may indicate a network or API configuration issue.&quot;</span>
                    <span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Provide detailed error message</span>
                <span class="n">reason</span> <span class="o">=</span> <span class="n">login_data</span><span class="p">[</span><span class="s2">&quot;login&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;reason&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown reason&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Login failed with result &#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#39;. Reason: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2">. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Check your bot password credentials and permissions.&quot;</span>
                <span class="p">)</span>

        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Network error during login to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_logged_in</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if currently logged in to MediaWiki API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if logged in, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Logout from MediaWiki API and clear session.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">            &gt;&gt;&gt; auth.login()</span>
<span class="sd">            &gt;&gt;&gt; # ... do some work ...</span>
<span class="sd">            &gt;&gt;&gt; auth.logout()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Get CSRF token for logout</span>
                <span class="n">token_params</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;tokens&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csrf&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="n">token_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">token_params</span><span class="p">)</span>
                <span class="n">token_data</span> <span class="o">=</span> <span class="n">token_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">token_data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;tokens&quot;</span><span class="p">][</span><span class="s2">&quot;csrftoken&quot;</span><span class="p">]</span>

                <span class="c1"># Perform logout</span>
                <span class="n">logout_params</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;logout&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">csrf_token</span><span class="p">,</span>
                    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">logout_params</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="c1"># Ignore logout errors, just clear session</span>
                <span class="k">pass</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_csrf_token</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a CSRF token for making edits.</span>

<span class="sd">        IMPORTANT: The token must be used with auth.session for requests.</span>
<span class="sd">        The token alone is not sufficient - you need the authenticated session cookies.</span>

<span class="sd">        Returns:</span>
<span class="sd">            CSRF token string.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthenticationError: If not logged in or token retrieval fails.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">            &gt;&gt;&gt; auth.login()</span>
<span class="sd">            &gt;&gt;&gt; token = auth.get_csrf_token()</span>
<span class="sd">            &gt;&gt;&gt; # Use token with auth.session (not a new requests call)</span>
<span class="sd">            &gt;&gt;&gt; response = auth.session.post(auth.api_url, data={</span>
<span class="sd">            ...     &quot;action&quot;: &quot;edit&quot;,</span>
<span class="sd">            ...     &quot;title&quot;: &quot;Page&quot;,</span>
<span class="sd">            ...     &quot;text&quot;: &quot;content&quot;,</span>
<span class="sd">            ...     &quot;token&quot;: token,</span>
<span class="sd">            ...     &quot;format&quot;: &quot;json&quot;</span>
<span class="sd">            ... })</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                <span class="s2">&quot;Not logged in. Call login() first before getting CSRF token.&quot;</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">token_params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
                <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;tokens&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csrf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="c1"># Use POST to ensure cookies are properly handled</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">token_params</span><span class="p">)</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

            <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="s2">&quot;tokens&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
                <span class="n">csrf_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;tokens&quot;</span><span class="p">][</span><span class="s2">&quot;csrftoken&quot;</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">csrf_token</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get CSRF token. Response: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Network error getting CSRF token: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;logged in&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span>
            <span class="k">else</span> <span class="p">(</span><span class="s2">&quot;authenticated&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;not authenticated&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;WikiverseAuth(username=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="si">!r}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;api_url=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_bot_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract bot name from username.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Bot name if username is in bot password format, None otherwise.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;Alice@MyBot&quot;)</span>
<span class="sd">            &gt;&gt;&gt; auth.get_bot_name()</span>
<span class="sd">            &#39;MyBot&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_account_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract account name from username.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Account name if username is in bot password format, None otherwise.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;Alice@MyBot&quot;)</span>
<span class="sd">            &gt;&gt;&gt; auth.get_account_name()</span>
<span class="sd">            &#39;Alice&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_authentication</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test authentication and return diagnostic information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary with authentication status, session details, and token info.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">            &gt;&gt;&gt; auth.login()</span>
<span class="sd">            &gt;&gt;&gt; info = auth.test_authentication()</span>
<span class="sd">            &gt;&gt;&gt; print(info)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;credentials_provided&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(),</span>
            <span class="s2">&quot;logged_in&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">(),</span>
            <span class="s2">&quot;api_url&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span>
            <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
            <span class="s2">&quot;bot_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bot_name</span><span class="p">(),</span>
            <span class="s2">&quot;session_cookies&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
            <span class="s2">&quot;csrf_token_retrieved&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;csrf_token_preview&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_csrf_token</span><span class="p">()</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;csrf_token_retrieved&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">preview</span> <span class="o">=</span> <span class="n">token</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span> <span class="k">else</span> <span class="n">token</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;csrf_token_preview&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">preview</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">info</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interactive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize Wikiverse authentication for bot accounts.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>username</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bot password username in format "Username@BotName".
If not provided, reads from WIKIVERSE_USERNAME
environment variable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>password</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bot password. If not provided, reads from
WIKIVERSE_PASSWORD environment variable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_url</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MediaWiki API endpoint URL. If not provided, reads from
    WIKIVERSE_API_URL environment variable, or defaults to Wikidata.
    Can also use shortcuts: "wikidata", "wikipedia", "commons"</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>interactive</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True and credentials are not found, prompt user for input.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">api_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">interactive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Wikiverse authentication for bot accounts.</span>

<span class="sd">    Args:</span>
<span class="sd">        username: Bot password username in format &quot;Username@BotName&quot;.</span>
<span class="sd">            If not provided, reads from WIKIVERSE_USERNAME</span>
<span class="sd">            environment variable.</span>
<span class="sd">        password: Bot password. If not provided, reads from</span>
<span class="sd">            WIKIVERSE_PASSWORD environment variable.</span>
<span class="sd">        api_url: MediaWiki API endpoint URL. If not provided, reads from</span>
<span class="sd">                WIKIVERSE_API_URL environment variable, or defaults to Wikidata.</span>
<span class="sd">                Can also use shortcuts: &quot;wikidata&quot;, &quot;wikipedia&quot;, &quot;commons&quot;</span>
<span class="sd">        interactive: If True and credentials are not found, prompt user for input.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Try provided parameters first</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">username</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;WIKIVERSE_USERNAME&quot;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">password</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;WIKIVERSE_PASSWORD&quot;</span><span class="p">)</span>
    <span class="n">api_url</span> <span class="o">=</span> <span class="n">api_url</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;WIKIVERSE_API_URL&quot;</span><span class="p">)</span>

    <span class="c1"># If credentials still not available and interactive mode is requested</span>
    <span class="k">if</span> <span class="n">interactive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bot password credentials not found in environment.&quot;</span><span class="p">)</span>
        <span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
            <span class="s2">&quot;Enter Wikiverse username (format: Username@BotName): &quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Enter Wikiverse password: &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">api_url</span><span class="p">:</span>
            <span class="n">api_url_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                <span class="s2">&quot;Enter API URL (or &#39;wikidata&#39;, &#39;wikipedia&#39;, &#39;commons&#39;) &quot;</span>
                <span class="s2">&quot;[default: wikidata]: &quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">api_url</span> <span class="o">=</span> <span class="n">api_url_input</span> <span class="k">if</span> <span class="n">api_url_input</span> <span class="k">else</span> <span class="s2">&quot;wikidata&quot;</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

    <span class="c1"># Resolve API URL shortcuts to full URLs</span>
    <span class="k">if</span> <span class="n">api_url</span> <span class="ow">and</span> <span class="n">api_url</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span><span class="p">[</span><span class="n">api_url</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
    <span class="k">elif</span> <span class="n">api_url</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="n">api_url</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Default to Wikidata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span><span class="p">[</span><span class="s2">&quot;wikidata&quot;</span><span class="p">]</span>

    <span class="c1"># Initialize session for authenticated requests</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;GKC-Python-Client/0.1 (https://github.com/skybristol/gkc)&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.get_account_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_account_name</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Extract account name from username.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Account name if username is in bot password format, None otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>auth = WikiverseAuth(username="Alice@MyBot")
auth.get_account_name()
'Alice'</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_account_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract account name from username.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Account name if username is in bot password format, None otherwise.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;Alice@MyBot&quot;)</span>
<span class="sd">        &gt;&gt;&gt; auth.get_account_name()</span>
<span class="sd">        &#39;Alice&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.get_bot_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_bot_name</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Extract bot name from username.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bot name if username is in bot password format, None otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>auth = WikiverseAuth(username="Alice@MyBot")
auth.get_bot_name()
'MyBot'</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_bot_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract bot name from username.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Bot name if username is in bot password format, None otherwise.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;Alice@MyBot&quot;)</span>
<span class="sd">        &gt;&gt;&gt; auth.get_bot_name()</span>
<span class="sd">        &#39;MyBot&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.get_csrf_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_csrf_token</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get a CSRF token for making edits.</p>
<p>IMPORTANT: The token must be used with auth.session for requests.
The token alone is not sufficient - you need the authenticated session cookies.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CSRF token string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.auth.AuthenticationError" href="#gkc.auth.AuthenticationError">AuthenticationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If not logged in or token retrieval fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>auth = WikiverseAuth(username="User@Bot", password="secret")
auth.login()
token = auth.get_csrf_token()</p>
<h5 id="gkc.auth.WikiverseAuth.get_csrf_token--use-token-with-authsession-not-a-new-requests-call">Use token with auth.session (not a new requests call)</h5>
<p>response = auth.session.post(auth.api_url, data={
...     "action": "edit",
...     "title": "Page",
...     "text": "content",
...     "token": token,
...     "format": "json"
... })</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_csrf_token</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a CSRF token for making edits.</span>

<span class="sd">    IMPORTANT: The token must be used with auth.session for requests.</span>
<span class="sd">    The token alone is not sufficient - you need the authenticated session cookies.</span>

<span class="sd">    Returns:</span>
<span class="sd">        CSRF token string.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AuthenticationError: If not logged in or token retrieval fails.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">        &gt;&gt;&gt; auth.login()</span>
<span class="sd">        &gt;&gt;&gt; token = auth.get_csrf_token()</span>
<span class="sd">        &gt;&gt;&gt; # Use token with auth.session (not a new requests call)</span>
<span class="sd">        &gt;&gt;&gt; response = auth.session.post(auth.api_url, data={</span>
<span class="sd">        ...     &quot;action&quot;: &quot;edit&quot;,</span>
<span class="sd">        ...     &quot;title&quot;: &quot;Page&quot;,</span>
<span class="sd">        ...     &quot;text&quot;: &quot;content&quot;,</span>
<span class="sd">        ...     &quot;token&quot;: token,</span>
<span class="sd">        ...     &quot;format&quot;: &quot;json&quot;</span>
<span class="sd">        ... })</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
            <span class="s2">&quot;Not logged in. Call login() first before getting CSRF token.&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">token_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
            <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;tokens&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csrf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># Use POST to ensure cookies are properly handled</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">token_params</span><span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="s2">&quot;tokens&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
            <span class="n">csrf_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;tokens&quot;</span><span class="p">][</span><span class="s2">&quot;csrftoken&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">csrf_token</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get CSRF token. Response: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Network error getting CSRF token: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.is_logged_in" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_logged_in</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if currently logged in to MediaWiki API.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if logged in, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_logged_in</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if currently logged in to MediaWiki API.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if logged in, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.login" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">login</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Perform login to MediaWiki API using bot password credentials.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if login successful, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.auth.AuthenticationError" href="#gkc.auth.AuthenticationError">AuthenticationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If login fails with detailed error message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>auth = WikiverseAuth(username="User@Bot", password="secret")
if auth.login():
...     print("Successfully logged in!")</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Perform login to MediaWiki API using bot password credentials.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if login successful, False otherwise.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AuthenticationError: If login fails with detailed error message.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">        &gt;&gt;&gt; if auth.login():</span>
<span class="sd">        ...     print(&quot;Successfully logged in!&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
            <span class="s2">&quot;Cannot login: credentials not provided. &quot;</span>
            <span class="s2">&quot;Please provide username and password.&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Step 1: Get login token</span>
        <span class="n">token_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
            <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;tokens&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;login&quot;</span><span class="p">,</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">token_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">token_params</span><span class="p">)</span>
        <span class="n">token_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="n">token_data</span> <span class="o">=</span> <span class="n">token_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">token_data</span> <span class="ow">or</span> <span class="s2">&quot;tokens&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">token_data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to get login token from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Response: </span><span class="si">{</span><span class="n">token_data</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">login_token</span> <span class="o">=</span> <span class="n">token_data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;tokens&quot;</span><span class="p">][</span><span class="s2">&quot;logintoken&quot;</span><span class="p">]</span>

        <span class="c1"># Step 2: Perform login with credentials and token</span>
        <span class="n">login_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;login&quot;</span><span class="p">,</span>
            <span class="s2">&quot;lgname&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
            <span class="s2">&quot;lgpassword&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
            <span class="s2">&quot;lgtoken&quot;</span><span class="p">:</span> <span class="n">login_token</span><span class="p">,</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">login_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">login_params</span><span class="p">)</span>
        <span class="n">login_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="n">login_data</span> <span class="o">=</span> <span class="n">login_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="c1"># Check login result</span>
        <span class="k">if</span> <span class="s2">&quot;login&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">login_data</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unexpected login response from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Response: </span><span class="si">{</span><span class="n">login_data</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">login_data</span><span class="p">[</span><span class="s2">&quot;login&quot;</span><span class="p">][</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="s2">&quot;Success&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="c1"># Verify we have session cookies</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">cookies</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                    <span class="s2">&quot;Login reported success but no session cookies were set. &quot;</span>
                    <span class="s2">&quot;This may indicate a network or API configuration issue.&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Provide detailed error message</span>
            <span class="n">reason</span> <span class="o">=</span> <span class="n">login_data</span><span class="p">[</span><span class="s2">&quot;login&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;reason&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown reason&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Login failed with result &#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#39;. Reason: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Check your bot password credentials and permissions.&quot;</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AuthenticationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Network error during login to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.logout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">logout</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Logout from MediaWiki API and clear session.</p>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>auth = WikiverseAuth(username="User@Bot", password="secret")
auth.login()</p>
<h5 id="gkc.auth.WikiverseAuth.logout--do-some-work">... do some work ...</h5>
<p>auth.logout()</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Logout from MediaWiki API and clear session.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">        &gt;&gt;&gt; auth.login()</span>
<span class="sd">        &gt;&gt;&gt; # ... do some work ...</span>
<span class="sd">        &gt;&gt;&gt; auth.logout()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get CSRF token for logout</span>
            <span class="n">token_params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
                <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;tokens&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csrf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">token_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">token_params</span><span class="p">)</span>
            <span class="n">token_data</span> <span class="o">=</span> <span class="n">token_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">token_data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;tokens&quot;</span><span class="p">][</span><span class="s2">&quot;csrftoken&quot;</span><span class="p">]</span>

            <span class="c1"># Perform logout</span>
            <span class="n">logout_params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;logout&quot;</span><span class="p">,</span>
                <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">csrf_token</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">logout_params</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="c1"># Ignore logout errors, just clear session</span>
            <span class="k">pass</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logged_in</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.auth.WikiverseAuth.test_authentication" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_authentication</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Test authentication and return diagnostic information.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary with authentication status, session details, and token info.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>auth = WikiverseAuth(username="User@Bot", password="secret")
auth.login()
info = auth.test_authentication()
print(info)</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_authentication</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test authentication and return diagnostic information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary with authentication status, session details, and token info.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; auth = WikiverseAuth(username=&quot;User@Bot&quot;, password=&quot;secret&quot;)</span>
<span class="sd">        &gt;&gt;&gt; auth.login()</span>
<span class="sd">        &gt;&gt;&gt; info = auth.test_authentication()</span>
<span class="sd">        &gt;&gt;&gt; print(info)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;credentials_provided&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(),</span>
        <span class="s2">&quot;logged_in&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">(),</span>
        <span class="s2">&quot;api_url&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
        <span class="s2">&quot;bot_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bot_name</span><span class="p">(),</span>
        <span class="s2">&quot;session_cookies&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
        <span class="s2">&quot;csrf_token_retrieved&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;csrf_token_preview&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_csrf_token</span><span class="p">()</span>
            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;csrf_token_retrieved&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">preview</span> <span class="o">=</span> <span class="n">token</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span> <span class="k">else</span> <span class="n">token</span>
            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;csrf_token_preview&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">preview</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">info</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="openstreetmapauth">OpenStreetMapAuth</h3>


<div class="doc doc-object doc-class">



<a id="gkc.auth.OpenStreetMapAuth"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gkc.auth.AuthBase" href="#gkc.auth.AuthBase">AuthBase</a></code></p>


        <p>Authentication for OpenStreetMap.</p>
<p>Credentials can be provided in three ways (in order of precedence):
1. Direct parameters
2. Environment variables (OPENSTREETMAP_USERNAME, OPENSTREETMAP_PASSWORD)
3. Interactive prompt</p>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<h4 id="gkc.auth.OpenStreetMapAuth--using-environment-variables">Using environment variables</h4>
<p>auth = OpenStreetMapAuth()</p>
<h4 id="gkc.auth.OpenStreetMapAuth--direct-parameters">Direct parameters</h4>
<p>auth = OpenStreetMapAuth(username="myuser", password="mypass")</p>
<h4 id="gkc.auth.OpenStreetMapAuth--interactive-prompt">Interactive prompt</h4>
<p>auth = OpenStreetMapAuth(interactive=True)
Enter OpenStreetMap username: myuser
Enter OpenStreetMap password: ****</p>
</blockquote>
</blockquote>
</blockquote>
</details>





              <details class="quote">
                <summary>Source code in <code>gkc/auth.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OpenStreetMapAuth</span><span class="p">(</span><span class="n">AuthBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Authentication for OpenStreetMap.</span>

<span class="sd">    Credentials can be provided in three ways (in order of precedence):</span>
<span class="sd">    1. Direct parameters</span>
<span class="sd">    2. Environment variables (OPENSTREETMAP_USERNAME, OPENSTREETMAP_PASSWORD)</span>
<span class="sd">    3. Interactive prompt</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # Using environment variables</span>
<span class="sd">        &gt;&gt;&gt; auth = OpenStreetMapAuth()</span>

<span class="sd">        &gt;&gt;&gt; # Direct parameters</span>
<span class="sd">        &gt;&gt;&gt; auth = OpenStreetMapAuth(username=&quot;myuser&quot;, password=&quot;mypass&quot;)</span>

<span class="sd">        &gt;&gt;&gt; # Interactive prompt</span>
<span class="sd">        &gt;&gt;&gt; auth = OpenStreetMapAuth(interactive=True)</span>
<span class="sd">        Enter OpenStreetMap username: myuser</span>
<span class="sd">        Enter OpenStreetMap password: ****</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">interactive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize OpenStreetMap authentication.</span>

<span class="sd">        Args:</span>
<span class="sd">            username: OpenStreetMap username. If not provided, reads from</span>
<span class="sd">                     OPENSTREETMAP_USERNAME environment variable.</span>
<span class="sd">            password: OpenStreetMap password. If not provided, reads from</span>
<span class="sd">                     OPENSTREETMAP_PASSWORD environment variable.</span>
<span class="sd">            interactive: If True and credentials are not found, prompt user for input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Try provided parameters first</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">username</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENSTREETMAP_USERNAME&quot;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">password</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENSTREETMAP_PASSWORD&quot;</span><span class="p">)</span>

        <span class="c1"># If credentials still not available and interactive mode is requested</span>
        <span class="k">if</span> <span class="n">interactive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;OpenStreetMap credentials not found in environment.&quot;</span><span class="p">)</span>
            <span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter OpenStreetMap username: &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Enter OpenStreetMap password: &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;authenticated&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;not authenticated&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;OpenStreetMapAuth(username=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="gkc.auth.OpenStreetMapAuth.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interactive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize OpenStreetMap authentication.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>username</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>OpenStreetMap username. If not provided, reads from
     OPENSTREETMAP_USERNAME environment variable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>password</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>OpenStreetMap password. If not provided, reads from
     OPENSTREETMAP_PASSWORD environment variable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>interactive</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True and credentials are not found, prompt user for input.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">interactive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize OpenStreetMap authentication.</span>

<span class="sd">    Args:</span>
<span class="sd">        username: OpenStreetMap username. If not provided, reads from</span>
<span class="sd">                 OPENSTREETMAP_USERNAME environment variable.</span>
<span class="sd">        password: OpenStreetMap password. If not provided, reads from</span>
<span class="sd">                 OPENSTREETMAP_PASSWORD environment variable.</span>
<span class="sd">        interactive: If True and credentials are not found, prompt user for input.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Try provided parameters first</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">username</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENSTREETMAP_USERNAME&quot;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">password</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENSTREETMAP_PASSWORD&quot;</span><span class="p">)</span>

    <span class="c1"># If credentials still not available and interactive mode is requested</span>
    <span class="k">if</span> <span class="n">interactive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;OpenStreetMap credentials not found in environment.&quot;</span><span class="p">)</span>
        <span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter OpenStreetMap username: &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Enter OpenStreetMap password: &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="examples">Examples</h2>
<h3 id="authenticate-to-wikidata-using-environment-variables">Authenticate to Wikidata using environment variables</h3>
<p>This is the recommended approach for production workflows and CI/CD environments:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span>

<span class="c1"># Set environment variables first:</span>
<span class="c1"># export WIKIVERSE_USERNAME=&quot;MyUsername@MyBot&quot;</span>
<span class="c1"># export WIKIVERSE_PASSWORD=&quot;abc123def456ghi789&quot;</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">()</span>
<span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully logged in to: </span><span class="si">{</span><span class="n">auth</span><span class="o">.</span><span class="n">api_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="authenticate-to-testwikidataorg-for-testing">Authenticate to test.wikidata.org for testing</h3>
<p>Use the new <code>wikidata_test</code> endpoint for development and testing:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;TestBot@BotAccount&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;test_password_123&quot;</span><span class="p">,</span>
    <span class="n">api_url</span><span class="o">=</span><span class="s2">&quot;wikidata_test&quot;</span>  <span class="c1"># Points to test.wikidata.org/w/api.php</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">():</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_csrf_token</span><span class="p">()</span>
    <span class="c1"># Use token for test edits</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got CSRF token for test edits&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="switch-between-wikimedia-projects">Switch between Wikimedia projects</h3>
<p>The same bot password credentials work across all Wikimedia projects thanks to Single User Login (SUL):</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span>

<span class="c1"># Create auth once with default Wikidata endpoint</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyUsername@MyBot&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;abc123def456ghi789&quot;</span>
<span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="c1"># Later, query Wikipedia instead</span>
<span class="n">auth</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="s2">&quot;https://en.wikipedia.org/w/api.php&quot;</span>
<span class="c1"># The session is already authenticated for all Wikimedia projects</span>

<span class="c1"># Or use shortcuts for common projects</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">gkc.auth</span><span class="w"> </span><span class="kn">import</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span>
<span class="n">auth</span><span class="o">.</span><span class="n">api_url</span> <span class="o">=</span> <span class="n">DEFAULT_WIKIMEDIA_APIS</span><span class="p">[</span><span class="s2">&quot;commons&quot;</span><span class="p">]</span>  <span class="c1"># Wikimedia Commons</span>
</code></pre></div>
<h3 id="use-authentication-session-for-api-requests">Use authentication session for API requests</h3>
<p>The authenticated session can be used directly for making API calls:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyUsername@MyBot&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;abc123def456ghi789&quot;</span><span class="p">,</span>
    <span class="n">api_url</span><span class="o">=</span><span class="s2">&quot;wikidata&quot;</span>
<span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="c1"># Use the authenticated session for queries</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">api_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;userinfo&quot;</span><span class="p">,</span>
    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span>
<span class="p">})</span>

<span class="n">userinfo</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Logged in as: </span><span class="si">{</span><span class="n">userinfo</span><span class="p">[</span><span class="s1">&#39;query&#39;</span><span class="p">][</span><span class="s1">&#39;userinfo&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="extract-account-and-bot-names">Extract account and bot names</h3>
<p>Parse bot password format to extract components:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;Alice@MyBot&quot;</span><span class="p">)</span>

<span class="c1"># Before login - still able to parse username</span>
<span class="n">account_name</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_account_name</span><span class="p">()</span>  <span class="c1"># &quot;Alice&quot;</span>
<span class="n">bot_name</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_bot_name</span><span class="p">()</span>          <span class="c1"># &quot;MyBot&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Account: </span><span class="si">{</span><span class="n">account_name</span><span class="si">}</span><span class="s2">, Bot: </span><span class="si">{</span><span class="n">bot_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Credentials can be provided via environment or password prompt</span>
<span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_csrf_token</span><span class="p">()</span>
</code></pre></div>
<h2 id="error-handling">Error Handling</h2>
<h3 id="missing-credentials">Missing credentials</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span><span class="p">,</span> <span class="n">AuthenticationError</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">()</span>  <span class="c1"># No credentials provided</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="k">except</span> <span class="n">AuthenticationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Login failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Output: Login failed: Cannot login: credentials not provided...</span>
</code></pre></div>
<h3 id="invalid-bot-password-credentials">Invalid bot password credentials</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span><span class="p">,</span> <span class="n">AuthenticationError</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;Alice@BadBot&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;wrong_password&quot;</span>
<span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="k">except</span> <span class="n">AuthenticationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Authentication error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Output will describe the specific failure reason</span>
</code></pre></div>
<h3 id="network-errors">Network errors</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span><span class="p">,</span> <span class="n">AuthenticationError</span>

<span class="c1"># Invalid API URL</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;Alice@MyBot&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;secret&quot;</span><span class="p">,</span>
    <span class="n">api_url</span><span class="o">=</span><span class="s2">&quot;https://invalid-wiki-site.example.com/w/api.php&quot;</span>
<span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="k">except</span> <span class="n">AuthenticationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Network error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Output: Network error during login to https://invalid-wiki-site.example.com/w/api.php: ...</span>
</code></pre></div>
<h3 id="missing-csrf-token-not-logged-in">Missing CSRF token (not logged in)</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">WikiverseAuth</span><span class="p">,</span> <span class="n">AuthenticationError</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">WikiverseAuth</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;Alice@MyBot&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;secret&quot;</span><span class="p">)</span>
<span class="c1"># Forgot to login first!</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_csrf_token</span><span class="p">()</span>
<span class="k">except</span> <span class="n">AuthenticationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Output: Error: Not logged in. Call login() first before getting CSRF token.</span>
</code></pre></div>
<h2 id="available-endpoints">Available Endpoints</h2>
<p>The auth module includes shortcuts for common Wikimedia instances:</p>
<table>
<thead>
<tr>
<th>Shortcut</th>
<th>Full URL</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wikidata</code></td>
<td><code>https://www.wikidata.org/w/api.php</code></td>
</tr>
<tr>
<td><code>wikidata_test</code></td>
<td><code>https://test.wikidata.org/w/api.php</code></td>
</tr>
<tr>
<td><code>wikipedia</code></td>
<td><code>https://en.wikipedia.org/w/api.php</code></td>
</tr>
<tr>
<td><code>commons</code></td>
<td><code>https://commons.wikimedia.org/w/api.php</code></td>
</tr>
</tbody>
</table>
<p>Custom MediaWiki instances can be used by providing the full API URL.</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../../authentication/">Authentication Guide</a> - Conceptual overview and setup instructions</li>
<li><a href="../sparql/">SPARQL API</a> - Query Wikidata and other SPARQL endpoints</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.sections", "navigation.top", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../javascripts/mermaid-init.js"></script>
      
    
  </body>
</html>