
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data Distillery - A framework for data distillation toward the Global Knowledge Commons">
      
      
      
        <link rel="canonical" href="https://datadistillery.org/gkc/api/shex/">
      
      
        <link rel="prev" href="../spirit_safe/">
      
      
        <link rel="next" href="../shipper/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>ShEx - Data Distillery</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#shex-validation-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Data Distillery" class="md-header__button md-logo" aria-label="Data Distillery" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Distillery
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ShEx
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/skybristol/gkc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    skybristol/gkc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Data Distillery" class="md-nav__button md-logo" aria-label="Data Distillery" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Data Distillery
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/skybristol/gkc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    skybristol/gkc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Curation Narratives
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Curation Narratives
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tribes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tribal Governments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SpiritSafe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/profile-loading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profile Loading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/spiritsafe-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/validation-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    GKC Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    GKC Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Background
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup and Orientation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Distillery Workflow
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Distillery Workflow
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shipping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shipping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" checked>
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mash_formatters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash Formatters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spirit_safe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    ShEx
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    ShEx
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shexvalidator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ShexValidator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator--validate-a-wikidata-item-against-an-entityschema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate a Wikidata item against an EntitySchema
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator--use-local-schema-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use local schema file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator--use-rdf-text-directly" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use RDF text directly
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __repr__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.check" class="md-nav__link">
    <span class="md-ellipsis">
      
        check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.evaluate" class="md-nav__link">
    <span class="md-ellipsis">
      
        evaluate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_valid
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.load_rdf" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_rdf
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.load_specification" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_specification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.passes_inspection" class="md-nav__link">
    <span class="md-ellipsis">
      
        passes_inspection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exceptions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shexvalidationerror" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidationError
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ShexValidationError">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidationError
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validating-wikidata-entities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validating Wikidata Entities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validating-local-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validating Local Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mixed Sources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-text-strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Text Strings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fluent-api-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fluent API Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-user-agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom User Agent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-upload-quality-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pre-Upload Quality Check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Batch Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-error-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Error Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-missing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Missing Sources
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shipper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shipper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sparql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SPARQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Command Line Interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Command Line Interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/mash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/shex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ShEx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Utilities and Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CI_CD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../RELEASE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shexvalidator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ShexValidator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator--validate-a-wikidata-item-against-an-entityschema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate a Wikidata item against an EntitySchema
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator--use-local-schema-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use local schema file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator--use-rdf-text-directly" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use RDF text directly
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __repr__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.check" class="md-nav__link">
    <span class="md-ellipsis">
      
        check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.evaluate" class="md-nav__link">
    <span class="md-ellipsis">
      
        evaluate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_valid
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.load_rdf" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_rdf
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.load_specification" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_specification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidator.passes_inspection" class="md-nav__link">
    <span class="md-ellipsis">
      
        passes_inspection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exceptions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shexvalidationerror" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidationError
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ShexValidationError">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gkc.shex.ShexValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShexValidationError
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validating-wikidata-entities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validating Wikidata Entities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validating-local-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validating Local Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mixed Sources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-text-strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Text Strings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fluent-api-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fluent API Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-user-agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom User Agent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-upload-quality-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pre-Upload Quality Check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Batch Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-error-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Error Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-missing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Missing Sources
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="shex-validation-api">ShEx Validation API</h1>
<h2 id="overview">Overview</h2>
<p>The ShEx validation module provides RDF data validation against ShEx (Shape Expression) schemas. It's designed primarily for validating Wikidata entities against EntitySchemas but supports any RDF data and ShEx schema combination.</p>
<p><strong>Current implementations:</strong> Wikidata EntitySchema validation, local file validation<br />
<strong>Future implementations:</strong> Additional RDF graph sources, streaming validation</p>
<h2 id="quick-start">Quick Start</h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="c1"># Validate Wikidata item against EntitySchema</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q14708404&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

<span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Validation passed&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Validation failed&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="classes">Classes</h2>
<h3 id="shexvalidator">ShexValidator</h3>


<div class="doc doc-object doc-class">



<a id="gkc.shex.ShexValidator"></a>
    <div class="doc doc-contents first">


        <p>ShEx Validator: Validate RDF data against ShEx schemas.</p>
<p>Validates Wikidata entities or local RDF data against EntitySchemas (ShEx format).
Supports multiple input sources: Wikidata entities, local files, or text strings.</p>
<p>Plain meaning: Check if data matches schema structure and rules.</p>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<h4 id="gkc.shex.ShexValidator--validate-a-wikidata-item-against-an-entityschema">Validate a Wikidata item against an EntitySchema</h4>
<p>validator = ShexValidator(qid='Q42', eid='E502')
result = validator.check()
if result.is_valid():
...     print("Validation passed!")</p>
<h4 id="gkc.shex.ShexValidator--use-local-schema-file">Use local schema file</h4>
<p>validator = ShexValidator(
...     qid='Q42',
...     schema_file='schema.shex'
... )
validator.check()</p>
<h4 id="gkc.shex.ShexValidator--use-rdf-text-directly">Use RDF text directly</h4>
<p>validator = ShexValidator(
...     rdf_text=my_rdf_data,
...     schema_text=my_schema
... )
validator.check()</p>
</blockquote>
</blockquote>
</blockquote>
</details>





              <details class="quote">
                <summary>Source code in <code>gkc/shex.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ShexValidator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ShEx Validator: Validate RDF data against ShEx schemas.</span>

<span class="sd">    Validates Wikidata entities or local RDF data against EntitySchemas (ShEx format).</span>
<span class="sd">    Supports multiple input sources: Wikidata entities, local files, or text strings.</span>

<span class="sd">    Plain meaning: Check if data matches schema structure and rules.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # Validate a Wikidata item against an EntitySchema</span>
<span class="sd">        &gt;&gt;&gt; validator = ShexValidator(qid=&#39;Q42&#39;, eid=&#39;E502&#39;)</span>
<span class="sd">        &gt;&gt;&gt; result = validator.check()</span>
<span class="sd">        &gt;&gt;&gt; if result.is_valid():</span>
<span class="sd">        ...     print(&quot;Validation passed!&quot;)</span>

<span class="sd">        &gt;&gt;&gt; # Use local schema file</span>
<span class="sd">        &gt;&gt;&gt; validator = ShexValidator(</span>
<span class="sd">        ...     qid=&#39;Q42&#39;,</span>
<span class="sd">        ...     schema_file=&#39;schema.shex&#39;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; validator.check()</span>

<span class="sd">        &gt;&gt;&gt; # Use RDF text directly</span>
<span class="sd">        &gt;&gt;&gt; validator = ShexValidator(</span>
<span class="sd">        ...     rdf_text=my_rdf_data,</span>
<span class="sd">        ...     schema_text=my_schema</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; validator.check()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">eid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">user_agent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schema_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schema_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">rdf_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">rdf_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ShEx validator.</span>

<span class="sd">        Args:</span>
<span class="sd">            qid: Wikidata entity ID (e.g., &#39;Q42&#39;). Optional if rdf_text or</span>
<span class="sd">                rdf_file provided.</span>
<span class="sd">            eid: EntitySchema ID for Wikidata schema (e.g., &#39;E502&#39;).</span>
<span class="sd">                Optional if schema_text or schema_file provided.</span>
<span class="sd">            user_agent: Custom user agent for Wikidata requests.</span>
<span class="sd">            schema_text: ShEx schema as ShExC string (alternative to eid).</span>
<span class="sd">            schema_file: Path to file containing ShEx schema (alternative to eid).</span>
<span class="sd">            rdf_text: RDF data as a string (alternative to qid).</span>
<span class="sd">            rdf_file: Path to file containing RDF data (alternative to qid).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qid</span> <span class="o">=</span> <span class="n">qid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_agent</span> <span class="o">=</span> <span class="n">user_agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema_text</span> <span class="o">=</span> <span class="n">schema_text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span> <span class="o">=</span> <span class="n">schema_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rdf_text</span> <span class="o">=</span> <span class="n">rdf_text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span> <span class="o">=</span> <span class="n">rdf_file</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_specification</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the ShEx schema specification from configured source.</span>

<span class="sd">        Tries sources in order: schema_text, schema_file, eid (fetch from Wikidata).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Self for method chaining</span>

<span class="sd">        Raises:</span>
<span class="sd">            ShexValidationError: If no valid schema source or loading fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_text</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_text</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="p">:</span>
                <span class="n">schema_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">schema_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Schema file not found: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="n">schema_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="n">fetch_schema_specification</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_agent</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                    <span class="s2">&quot;No schema source provided. &quot;</span>
                    <span class="s2">&quot;Specify eid, schema_text, or schema_file.&quot;</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">CooperageError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load schema: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to read schema file: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load RDF data from configured source.</span>

<span class="sd">        Tries sources in order: rdf_text, rdf_file, qid (from Wikidata).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Self for method chaining</span>

<span class="sd">        Raises:</span>
<span class="sd">            ShexValidationError: If no valid RDF source or loading fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_text</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_text</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="p">:</span>
                <span class="n">rdf_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">rdf_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;RDF file not found: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="o">=</span> <span class="n">rdf_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="o">=</span> <span class="n">fetch_entity_rdf</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;ttl&quot;</span><span class="p">,</span> <span class="n">user_agent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_agent</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                    <span class="s2">&quot;No RDF source provided. Specify qid, rdf_text, or rdf_file.&quot;</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">CooperageError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load RDF: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to read RDF file: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">passes_inspection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if validation passed (alias for is_valid).</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if validation passed, False otherwise</span>

<span class="sd">        Raises:</span>
<span class="sd">            ShexValidationError: If check() hasn&#39;t been called yet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluate RDF data against the ShEx schema specification.</span>

<span class="sd">        Must call load_specification() and load_rdf() first, or use check().</span>

<span class="sd">        Returns:</span>
<span class="sd">            Self with results populated</span>

<span class="sd">        Raises:</span>
<span class="sd">            ShexValidationError: If evaluation fails or data not loaded</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                <span class="s2">&quot;Schema not loaded. Call load_specification() first or use check().&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                <span class="s2">&quot;RDF data not loaded. Call load_rdf() first or use check().&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Determine focus node</span>
        <span class="n">focus</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">:</span>
            <span class="n">focus</span> <span class="o">=</span> <span class="n">get_entity_uri</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="n">ShExEvaluator</span><span class="p">(</span>
                <span class="n">rdf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_schema</span><span class="p">,</span> <span class="n">focus</span><span class="o">=</span><span class="n">focus</span>
            <span class="p">)</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ShEx evaluation failed: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate: Load schema, load RDF, and evaluate in one call.</span>

<span class="sd">        This is the main entry point for validation. It loads schema and data</span>
<span class="sd">        from configured sources, then performs the validation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Self with results populated</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; validator = ShexValidator(qid=&#39;Q42&#39;, eid=&#39;E502&#39;)</span>
<span class="sd">            &gt;&gt;&gt; validator.check()</span>
<span class="sd">            &gt;&gt;&gt; if validator.is_valid():</span>
<span class="sd">            ...     print(&quot;Validation passed!&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_specification</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_rdf</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if validation passed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if validation passed, False otherwise</span>

<span class="sd">        Raises:</span>
<span class="sd">            ShexValidationError: If check() hasn&#39;t been called yet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No validation results. Call check() first.&quot;</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Handle mocked results (for testing)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

        <span class="c1"># PyShEx returns results as a list of EvaluationResult objects</span>
        <span class="c1"># When validation succeeds, reason contains matching triples</span>
        <span class="c1"># When validation fails, reason contains error messages like</span>
        <span class="c1"># &quot;Node: ... not in value set&quot;</span>
        <span class="c1"># If no focus is specified, PyShEx tests all nodes;</span>
        <span class="c1"># we need at least one success</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Check if at least one result succeeded (no error indicators)</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
            <span class="n">reason</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">reason</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
            <span class="c1"># Common failure indicators in PyShEx error messages</span>
            <span class="n">has_error</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span>
                <span class="n">indicator</span> <span class="ow">in</span> <span class="n">reason</span>
                <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="s2">&quot;not in value set&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;does not match&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Constraint violation&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;No matching&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Failed to&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">has_error</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of validator.&quot;&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;qid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rdf_file=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;schema_file=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="k">if</span> <span class="n">parts</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ShexValidator(</span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">user_agent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schema_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schema_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rdf_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rdf_file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize the ShEx validator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>qid</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wikidata entity ID (e.g., 'Q42'). Optional if rdf_text or
rdf_file provided.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>eid</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>EntitySchema ID for Wikidata schema (e.g., 'E502').
Optional if schema_text or schema_file provided.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_agent</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Custom user agent for Wikidata requests.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema_text</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ShEx schema as ShExC string (alternative to eid).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema_file</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to file containing ShEx schema (alternative to eid).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rdf_text</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RDF data as a string (alternative to qid).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rdf_file</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to file containing RDF data (alternative to qid).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">qid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">eid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">user_agent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">schema_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">schema_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rdf_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rdf_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the ShEx validator.</span>

<span class="sd">    Args:</span>
<span class="sd">        qid: Wikidata entity ID (e.g., &#39;Q42&#39;). Optional if rdf_text or</span>
<span class="sd">            rdf_file provided.</span>
<span class="sd">        eid: EntitySchema ID for Wikidata schema (e.g., &#39;E502&#39;).</span>
<span class="sd">            Optional if schema_text or schema_file provided.</span>
<span class="sd">        user_agent: Custom user agent for Wikidata requests.</span>
<span class="sd">        schema_text: ShEx schema as ShExC string (alternative to eid).</span>
<span class="sd">        schema_file: Path to file containing ShEx schema (alternative to eid).</span>
<span class="sd">        rdf_text: RDF data as a string (alternative to qid).</span>
<span class="sd">        rdf_file: Path to file containing RDF data (alternative to qid).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">qid</span> <span class="o">=</span> <span class="n">qid</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">user_agent</span> <span class="o">=</span> <span class="n">user_agent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_text</span> <span class="o">=</span> <span class="n">schema_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span> <span class="o">=</span> <span class="n">schema_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rdf_text</span> <span class="o">=</span> <span class="n">rdf_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span> <span class="o">=</span> <span class="n">rdf_file</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>String representation of validator.</p>

            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;String representation of validator.&quot;&quot;&quot;</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">:</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;qid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">:</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="p">:</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rdf_file=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="p">:</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;schema_file=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="k">if</span> <span class="n">parts</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ShexValidator(</span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.check" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate: Load schema, load RDF, and evaluate in one call.</p>
<p>This is the main entry point for validation. It loads schema and data
from configured sources, then performs the validation.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidator" href="#gkc.shex.ShexValidator">ShexValidator</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Self with results populated</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>validator = ShexValidator(qid='Q42', eid='E502')
validator.check()
if validator.is_valid():
...     print("Validation passed!")</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate: Load schema, load RDF, and evaluate in one call.</span>

<span class="sd">    This is the main entry point for validation. It loads schema and data</span>
<span class="sd">    from configured sources, then performs the validation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Self with results populated</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; validator = ShexValidator(qid=&#39;Q42&#39;, eid=&#39;E502&#39;)</span>
<span class="sd">        &gt;&gt;&gt; validator.check()</span>
<span class="sd">        &gt;&gt;&gt; if validator.is_valid():</span>
<span class="sd">        ...     print(&quot;Validation passed!&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_specification</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_rdf</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.evaluate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evaluate</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Evaluate RDF data against the ShEx schema specification.</p>
<p>Must call load_specification() and load_rdf() first, or use check().</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidator" href="#gkc.shex.ShexValidator">ShexValidator</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Self with results populated</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidationError" href="#gkc.shex.ShexValidationError">ShexValidationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If evaluation fails or data not loaded</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluate RDF data against the ShEx schema specification.</span>

<span class="sd">    Must call load_specification() and load_rdf() first, or use check().</span>

<span class="sd">    Returns:</span>
<span class="sd">        Self with results populated</span>

<span class="sd">    Raises:</span>
<span class="sd">        ShexValidationError: If evaluation fails or data not loaded</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
            <span class="s2">&quot;Schema not loaded. Call load_specification() first or use check().&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
            <span class="s2">&quot;RDF data not loaded. Call load_rdf() first or use check().&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Determine focus node</span>
    <span class="n">focus</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">:</span>
        <span class="n">focus</span> <span class="o">=</span> <span class="n">get_entity_uri</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="n">ShExEvaluator</span><span class="p">(</span>
            <span class="n">rdf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_schema</span><span class="p">,</span> <span class="n">focus</span><span class="o">=</span><span class="n">focus</span>
        <span class="p">)</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ShEx evaluation failed: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.is_valid" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_valid</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if validation passed.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if validation passed, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidationError" href="#gkc.shex.ShexValidationError">ShexValidationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If check() hasn't been called yet</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if validation passed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if validation passed, False otherwise</span>

<span class="sd">    Raises:</span>
<span class="sd">        ShexValidationError: If check() hasn&#39;t been called yet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No validation results. Call check() first.&quot;</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Handle mocked results (for testing)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

    <span class="c1"># PyShEx returns results as a list of EvaluationResult objects</span>
    <span class="c1"># When validation succeeds, reason contains matching triples</span>
    <span class="c1"># When validation fails, reason contains error messages like</span>
    <span class="c1"># &quot;Node: ... not in value set&quot;</span>
    <span class="c1"># If no focus is specified, PyShEx tests all nodes;</span>
    <span class="c1"># we need at least one success</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check if at least one result succeeded (no error indicators)</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
        <span class="n">reason</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">reason</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># Common failure indicators in PyShEx error messages</span>
        <span class="n">has_error</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span>
            <span class="n">indicator</span> <span class="ow">in</span> <span class="n">reason</span>
            <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="s2">&quot;not in value set&quot;</span><span class="p">,</span>
                <span class="s2">&quot;does not match&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Constraint violation&quot;</span><span class="p">,</span>
                <span class="s2">&quot;No matching&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Failed to&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">has_error</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.load_rdf" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_rdf</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Load RDF data from configured source.</p>
<p>Tries sources in order: rdf_text, rdf_file, qid (from Wikidata).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidator" href="#gkc.shex.ShexValidator">ShexValidator</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Self for method chaining</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidationError" href="#gkc.shex.ShexValidationError">ShexValidationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no valid RDF source or loading fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load RDF data from configured source.</span>

<span class="sd">    Tries sources in order: rdf_text, rdf_file, qid (from Wikidata).</span>

<span class="sd">    Returns:</span>
<span class="sd">        Self for method chaining</span>

<span class="sd">    Raises:</span>
<span class="sd">        ShexValidationError: If no valid RDF source or loading fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_text</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_text</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="p">:</span>
            <span class="n">rdf_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">rdf_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;RDF file not found: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rdf_file</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="o">=</span> <span class="n">rdf_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rdf</span> <span class="o">=</span> <span class="n">fetch_entity_rdf</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">qid</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;ttl&quot;</span><span class="p">,</span> <span class="n">user_agent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_agent</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                <span class="s2">&quot;No RDF source provided. Specify qid, rdf_text, or rdf_file.&quot;</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="n">CooperageError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load RDF: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to read RDF file: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.load_specification" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_specification</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Load the ShEx schema specification from configured source.</p>
<p>Tries sources in order: schema_text, schema_file, eid (fetch from Wikidata).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidator" href="#gkc.shex.ShexValidator">ShexValidator</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Self for method chaining</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidationError" href="#gkc.shex.ShexValidationError">ShexValidationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no valid schema source or loading fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_specification</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ShexValidator&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load the ShEx schema specification from configured source.</span>

<span class="sd">    Tries sources in order: schema_text, schema_file, eid (fetch from Wikidata).</span>

<span class="sd">    Returns:</span>
<span class="sd">        Self for method chaining</span>

<span class="sd">    Raises:</span>
<span class="sd">        ShexValidationError: If no valid schema source or loading fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_text</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_text</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="p">:</span>
            <span class="n">schema_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">schema_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Schema file not found: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema_file</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="n">schema_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="n">fetch_schema_specification</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_agent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span>
                <span class="s2">&quot;No schema source provided. &quot;</span>
                <span class="s2">&quot;Specify eid, schema_text, or schema_file.&quot;</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="n">CooperageError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load schema: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to read schema file: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="n">ShexValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gkc.shex.ShexValidator.passes_inspection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">passes_inspection</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if validation passed (alias for is_valid).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if validation passed, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="gkc.shex.ShexValidationError" href="#gkc.shex.ShexValidationError">ShexValidationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If check() hasn't been called yet</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gkc/shex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">passes_inspection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if validation passed (alias for is_valid).</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if validation passed, False otherwise</span>

<span class="sd">    Raises:</span>
<span class="sd">        ShexValidationError: If check() hasn&#39;t been called yet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="exceptions">Exceptions</h2>
<h3 id="shexvalidationerror">ShexValidationError</h3>


<div class="doc doc-object doc-class">



<a id="gkc.shex.ShexValidationError"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Raised when ShEx validation encounters an error.</p>






              <details class="quote">
                <summary>Source code in <code>gkc/shex.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ShexValidationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when ShEx validation encounters an error.&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div><h2 id="examples">Examples</h2>
<h3 id="validating-wikidata-entities">Validating Wikidata Entities</h3>
<p>Validate a Wikidata item against a published EntitySchema:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="c1"># Validate federally recognized tribe (Q14708404) against tribe schema (E502)</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q14708404&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

<span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Item conforms to EntitySchema E502&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Item does not conform:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="validating-local-files">Validating Local Files</h3>
<p>Validate local RDF data against a local ShEx schema:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">rdf_file</span><span class="o">=</span><span class="s1">&#39;path/to/entity.ttl&#39;</span><span class="p">,</span>
    <span class="n">schema_file</span><span class="o">=</span><span class="s1">&#39;path/to/schema.shex&#39;</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valid: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="mixed-sources">Mixed Sources</h3>
<p>You can mix Wikidata and local sources:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Wikidata entity with local schema</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q42&#39;</span><span class="p">,</span>
    <span class="n">schema_file</span><span class="o">=</span><span class="s1">&#39;custom_schema.shex&#39;</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

<span class="c1"># Local RDF data with Wikidata EntitySchema</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">rdf_file</span><span class="o">=</span><span class="s1">&#39;new_entity.ttl&#39;</span><span class="p">,</span>
    <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div>
<h3 id="using-text-strings">Using Text Strings</h3>
<p>For programmatically generated RDF or schemas:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="n">my_rdf</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">@prefix wd: &lt;http://www.wikidata.org/entity/&gt; .</span>
<span class="s2">@prefix wdt: &lt;http://www.wikidata.org/prop/direct/&gt; .</span>

<span class="s2">wd:Q42 wdt:P31 wd:Q5 .</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">my_schema</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">PREFIX wdt: &lt;http://www.wikidata.org/prop/direct/&gt;</span>
<span class="s2">PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;</span>

<span class="s2">&lt;Human&gt; {</span>
<span class="s2">  wdt:P31 [ wd:Q5 ]</span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">rdf_text</span><span class="o">=</span><span class="n">my_rdf</span><span class="p">,</span>
    <span class="n">schema_text</span><span class="o">=</span><span class="n">my_schema</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div>
<h3 id="fluent-api-pattern">Fluent API Pattern</h3>
<p>Load and validate step-by-step:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q42&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>

<span class="c1"># Load schema</span>
<span class="n">validator</span><span class="o">.</span><span class="n">load_specification</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema loaded: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">validator</span><span class="o">.</span><span class="n">_schema</span><span class="p">)</span><span class="si">}</span><span class="s2"> characters&quot;</span><span class="p">)</span>

<span class="c1"># Load RDF data</span>
<span class="n">validator</span><span class="o">.</span><span class="n">load_rdf</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RDF loaded: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">validator</span><span class="o">.</span><span class="n">_rdf</span><span class="p">)</span><span class="si">}</span><span class="s2"> characters&quot;</span><span class="p">)</span>

<span class="c1"># Perform validation</span>
<span class="n">validator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>

<span class="c1"># Check result</span>
<span class="k">if</span> <span class="n">validator</span><span class="o">.</span><span class="n">passes_inspection</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Validation passed!&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="custom-user-agent">Custom User Agent</h3>
<p>When fetching from Wikidata, use a custom user agent:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q42&#39;</span><span class="p">,</span>
    <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">,</span>
    <span class="n">user_agent</span><span class="o">=</span><span class="s1">&#39;MyBot/1.0 (https://example.com; bot@example.com)&#39;</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div>
<h3 id="pre-upload-quality-check">Pre-Upload Quality Check</h3>
<p>Validate data before uploading to Wikidata:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span><span class="p">,</span> <span class="n">ShexValidationError</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_before_upload</span><span class="p">(</span><span class="n">rdf_data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_schema</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate RDF data against target EntitySchema.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
            <span class="n">rdf_text</span><span class="o">=</span><span class="n">rdf_data</span><span class="p">,</span>
            <span class="n">eid</span><span class="o">=</span><span class="n">target_schema</span>
        <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Log validation errors</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation error: </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">except</span> <span class="n">ShexValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># Use in upload workflow</span>
<span class="k">if</span> <span class="n">validate_before_upload</span><span class="p">(</span><span class="n">my_data</span><span class="p">,</span> <span class="s1">&#39;E502&#39;</span><span class="p">):</span>
    <span class="n">upload_to_wikidata</span><span class="p">(</span><span class="n">my_data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fix validation errors before uploading&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="batch-validation">Batch Validation</h3>
<p>Validate multiple entities:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="n">entities_to_validate</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;Q14708404&#39;</span><span class="p">,</span> <span class="s1">&#39;Wanapum&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Q3551781&#39;</span><span class="p">,</span> <span class="s1">&#39;Umatilla&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Q1948829&#39;</span><span class="p">,</span> <span class="s1">&#39;Muckleshoot&#39;</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">schema_id</span> <span class="o">=</span> <span class="s1">&#39;E502&#39;</span>  <span class="c1"># Federally recognized tribe schema</span>

<span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">qid</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">entities_to_validate</span><span class="p">:</span>
    <span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="n">qid</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>
    <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
    <span class="n">results</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>

<span class="c1"># Report</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">valid</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;✓&quot;</span> <span class="k">if</span> <span class="n">valid</span> <span class="k">else</span> <span class="s2">&quot;✗&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="error-handling">Error Handling</h2>
<h3 id="common-error-patterns">Common Error Patterns</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.shex</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidationError</span><span class="p">,</span> <span class="n">ShexValidator</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q42&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="c1"># Parse validation errors</span>
        <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
            <span class="n">reason</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">reason</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>

            <span class="k">if</span> <span class="s2">&quot;not in value set&quot;</span> <span class="ow">in</span> <span class="n">reason</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value constraint violation: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;does not match&quot;</span> <span class="ow">in</span> <span class="n">reason</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Format/type mismatch: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;Constraint violation&quot;</span> <span class="ow">in</span> <span class="n">reason</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cardinality or requirement error: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="n">ShexValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation process failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="handling-missing-sources">Handling Missing Sources</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.shex</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidationError</span><span class="p">,</span> <span class="n">ShexValidator</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">()</span>  <span class="c1"># No sources provided</span>
    <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
<span class="k">except</span> <span class="n">ShexValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Output: &quot;No schema source provided. Specify eid, schema_text, or schema_file.&quot;</span>
</code></pre></div>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../../cli/shex/">ShEx CLI Documentation</a> - Command-line interface</li>
<li><a href="../../utilities/">Utilities Guide</a> - General ShEx validation guide</li>
<li><a href="https://www.wikidata.org/wiki/Wikidata:EntitySchema">Wikidata EntitySchemas</a> - Wikidata's schema namespace</li>
<li><a href="http://shex.io/shex-primer/">ShEx Primer</a> - Learn ShEx syntax</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.sections", "navigation.top", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../javascripts/mermaid-init.js"></script>
      
    
  </body>
</html>