
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data Distillery - A framework for data distillation toward the Global Knowledge Commons">
      
      
      
        <link rel="canonical" href="https://datadistillery.org/gkc/utilities/">
      
      
        <link rel="prev" href="../cli/shex/">
      
      
        <link rel="next" href="../CI_CD/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Utilities - Data Distillery</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gkc-utility-modules" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Data Distillery" class="md-header__button md-logo" aria-label="Data Distillery" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Distillery
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Utilities
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/skybristol/gkc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    skybristol/gkc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Data Distillery" class="md-nav__button md-logo" aria-label="Data Distillery" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Data Distillery
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/skybristol/gkc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    skybristol/gkc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Curation Narratives
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Curation Narratives
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tribes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tribal Governments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpiritSafe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/profile-loading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profile Loading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/spiritsafe-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/validation-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    GKC Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    GKC Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Background
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup and Orientation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Distillery Workflow
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Distillery Workflow
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shipping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shipping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/mash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/mash_formatters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash Formatters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/spirit_safe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpiritSafe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/shex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ShEx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/shipper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shipper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/sparql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SPARQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Command Line Interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Command Line Interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/mash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/shex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ShEx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" checked>
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Utilities and Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sparql-query-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        SPARQL Query Utilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SPARQL Query Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-query" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Query
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-from-wikidata-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        Query from Wikidata URL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convert-to-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        Convert to DataFrame
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-to-csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        Export to CSV
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-usage-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Usage Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Usage Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-off-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        One-off Queries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Endpoints
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-sparql-query-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common SPARQL Query Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common SPARQL Query Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-items-by-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get Items by Type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-by-property-value" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter by Property Value
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-related-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get Related Items
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-large-result-sets-with-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Large Result Sets with Pagination
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling Large Result Sets with Pagination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Pagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagination-with-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pagination with Control
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-limitoffset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual LIMIT/OFFSET
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lookup-cache-and-choice-lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lookup Cache and Choice Lists
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lookup Cache and Choice Lists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-and-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup and Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choice-list-normalization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choice List Normalization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refresh-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Refresh Policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile-integration-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Profile Integration Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shex-validation-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShEx Validation Utilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ShEx Validation Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-start_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate-wikidata-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Wikidata Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-local-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Local Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mixed Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-usage-patterns_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Usage Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Usage Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fluent-api-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fluent API Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-text-strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Text Strings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CLI Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate-wikidata-entity_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Wikidata Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-local-files_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Local Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mixed Sources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-user-agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom User Agent
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-validation-results" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Validation Results
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding Validation Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#successful-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Successful Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failed-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failed Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-shex-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to Use ShEx Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CI_CD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RELEASE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sparql-query-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        SPARQL Query Utilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SPARQL Query Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-query" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Query
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-from-wikidata-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        Query from Wikidata URL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convert-to-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        Convert to DataFrame
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-to-csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        Export to CSV
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-usage-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Usage Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Usage Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-off-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        One-off Queries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Endpoints
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-sparql-query-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common SPARQL Query Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common SPARQL Query Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-items-by-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get Items by Type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-by-property-value" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter by Property Value
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-related-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get Related Items
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-large-result-sets-with-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Large Result Sets with Pagination
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling Large Result Sets with Pagination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Pagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagination-with-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pagination with Control
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-limitoffset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual LIMIT/OFFSET
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lookup-cache-and-choice-lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lookup Cache and Choice Lists
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lookup Cache and Choice Lists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-and-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup and Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choice-list-normalization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choice List Normalization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refresh-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Refresh Policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile-integration-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Profile Integration Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shex-validation-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShEx Validation Utilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ShEx Validation Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-start_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate-wikidata-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Wikidata Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-local-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Local Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mixed Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-usage-patterns_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Usage Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Usage Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fluent-api-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fluent API Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-text-strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Text Strings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CLI Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate-wikidata-entity_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Wikidata Entity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-local-files_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validate Local Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mixed Sources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-user-agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom User Agent
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-validation-results" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Validation Results
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding Validation Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#successful-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Successful Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failed-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failed Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-shex-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to Use ShEx Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="gkc-utility-modules">GKC Utility Modules</h1>
<p>GKC provides two main utility modules for working with Wikidata and other knowledge graph systems:</p>
<ul>
<li><strong>SPARQL Query Utilities</strong>: Execute SPARQL queries against Wikidata and other endpoints</li>
<li><strong>ShEx Validation Utilities</strong>: Validate RDF data against ShEx schemas</li>
</ul>
<p>These utilities are independent, reusable components that work both as Python libraries and through the CLI.</p>
<hr />
<h2 id="sparql-query-utilities">SPARQL Query Utilities</h2>
<p>The GKC SPARQL module provides utilities for executing SPARQL queries against Wikidata, DBpedia, or any other SPARQL endpoint. It supports multiple input formats (raw queries, Wikidata URLs) and output types (JSON, DataFrames, CSV).</p>
<h3 id="features">Features</h3>
<ul>
<li><strong>Multiple Input Formats</strong>: Raw SPARQL queries or Wikidata Query Service URLs</li>
<li><strong>Multiple Output Types</strong>: JSON objects, Python dictionaries, pandas DataFrames, CSV</li>
<li><strong>Error Handling</strong>: Comprehensive error messages and custom exceptions</li>
<li><strong>Custom Endpoints</strong>: Query any SPARQL endpoint, not just Wikidata</li>
<li><strong>Pandas Integration</strong>: Optional pandas support for data analysis</li>
<li><strong>Clean API</strong>: Both class-based and convenience functions</li>
</ul>
<h3 id="installation">Installation</h3>
<p>The SPARQL module is included in GKC. For optional pandas support:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>pandas
</code></pre></div>
<h3 id="quick-start">Quick Start</h3>
<h4 id="basic-query">Basic Query</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">SPARQLQuery</span>

<span class="n">executor</span> <span class="o">=</span> <span class="n">SPARQLQuery</span><span class="p">()</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT ?item ?itemLabel WHERE {</span>
<span class="s2">      ?item wdt:P31 wd:Q146 .</span>
<span class="s2">      SERVICE wikibase:label {</span>
<span class="s2">        bd:serviceParam wikibase:language &quot;en&quot; .</span>
<span class="s2">      }</span>
<span class="s2">    }</span>
<span class="s2">    LIMIT 5</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>
<h4 id="query-from-wikidata-url">Query from Wikidata URL</h4>
<p>If you build a query using the <a href="https://query.wikidata.org/">Wikidata Query Service</a> (WDQS), the URL can be copied and used directly:</p>
<div class="highlight"><pre><span></span><code><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://query.wikidata.org/#SELECT%20?item%20WHERE%20...&quot;</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div>
<h4 id="convert-to-dataframe">Convert to DataFrame</h4>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT ?item ?itemLabel WHERE {</span>
<span class="s2">      ?item wdt:P31 wd:Q146 .</span>
<span class="s2">      SERVICE wikibase:label {</span>
<span class="s2">        bd:serviceParam wikibase:language &quot;en&quot; .</span>
<span class="s2">      }</span>
<span class="s2">    }</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div>
<h4 id="export-to-csv">Export to CSV</h4>
<div class="highlight"><pre><span></span><code><span class="n">executor</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;results.csv&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="common-usage-patterns">Common Usage Patterns</h3>
<h4 id="one-off-queries">One-off Queries</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">execute_sparql</span><span class="p">,</span> <span class="n">execute_sparql_to_dataframe</span>

<span class="c1"># Simple query</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">execute_sparql</span><span class="p">(</span><span class="s2">&quot;SELECT ?item WHERE { ?item wdt:P31 wd:Q5 } LIMIT 10&quot;</span><span class="p">)</span>

<span class="c1"># Get DataFrame directly</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">execute_sparql_to_dataframe</span><span class="p">(</span><span class="s2">&quot;SELECT ?item WHERE { ?item wdt:P31 wd:Q5 } LIMIT 10&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="custom-endpoints">Custom Endpoints</h4>
<div class="highlight"><pre><span></span><code><span class="n">executor</span> <span class="o">=</span> <span class="n">SPARQLQuery</span><span class="p">(</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://dbpedia.org/sparql&quot;</span><span class="p">,</span>
    <span class="n">user_agent</span><span class="o">=</span><span class="s2">&quot;MyApp/1.0&quot;</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span>
<span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;SELECT ?s ?p ?o WHERE { ... }&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="error-handling">Error Handling</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.sparql</span><span class="w"> </span><span class="kn">import</span> <span class="n">SPARQLError</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;SELECT ?item WHERE { ... }&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">SPARQLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="common-sparql-query-patterns">Common SPARQL Query Patterns</h3>
<h4 id="get-items-by-type">Get Items by Type</h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="nv">?item</span> <span class="nv">?itemLabel</span> <span class="k">WHERE</span> <span class="p">{</span>
  <span class="nv">?item</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P31</span> <span class="nn">wd</span><span class="p">:</span><span class="nt">Q5</span> <span class="p">.</span>  <span class="c"># Instance of human</span>
  <span class="k">SERVICE</span> <span class="nn">wikibase</span><span class="p">:</span><span class="nt">label</span> <span class="p">{</span>
    <span class="nn">bd</span><span class="p">:</span><span class="nt">serviceParam</span> <span class="nn">wikibase</span><span class="p">:</span><span class="nt">language</span> <span class="s">&quot;en&quot;</span> <span class="p">.</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">LIMIT</span> <span class="mi">10</span>
</code></pre></div>
<h4 id="filter-by-property-value">Filter by Property Value</h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="nv">?item</span> <span class="nv">?itemLabel</span> <span class="nv">?population</span> <span class="k">WHERE</span> <span class="p">{</span>
  <span class="nv">?item</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P31</span> <span class="nn">wd</span><span class="p">:</span><span class="nt">Q515</span> <span class="p">.</span>        <span class="c"># Instance of city</span>
  <span class="nv">?item</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P1082</span> <span class="nv">?population</span> <span class="p">.</span>   <span class="c"># Has population</span>
  <span class="k">FILTER</span><span class="p">(</span><span class="nv">?population</span> <span class="o">&gt;</span> <span class="mi">1000000</span><span class="p">)</span>
  <span class="k">SERVICE</span> <span class="nn">wikibase</span><span class="p">:</span><span class="nt">label</span> <span class="p">{</span>
    <span class="nn">bd</span><span class="p">:</span><span class="nt">serviceParam</span> <span class="nn">wikibase</span><span class="p">:</span><span class="nt">language</span> <span class="s">&quot;en&quot;</span> <span class="p">.</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">ORDER BY</span> <span class="k">DESC</span><span class="p">(</span><span class="nv">?population</span><span class="p">)</span>
<span class="k">LIMIT</span> <span class="mi">10</span>
</code></pre></div>
<h4 id="get-related-items">Get Related Items</h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="nv">?person</span> <span class="nv">?personLabel</span> <span class="nv">?country</span> <span class="nv">?countryLabel</span> <span class="k">WHERE</span> <span class="p">{</span>
  <span class="nv">?person</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P27</span> <span class="nv">?country</span> <span class="p">.</span>      <span class="c"># Country of citizenship</span>
  <span class="nv">?country</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P30</span> <span class="nn">wd</span><span class="p">:</span><span class="nt">Q15</span> <span class="p">.</span>       <span class="c"># Country in Africa</span>
  <span class="k">SERVICE</span> <span class="nn">wikibase</span><span class="p">:</span><span class="nt">label</span> <span class="p">{</span>
    <span class="nn">bd</span><span class="p">:</span><span class="nt">serviceParam</span> <span class="nn">wikibase</span><span class="p">:</span><span class="nt">language</span> <span class="s">&quot;en&quot;</span> <span class="p">.</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">LIMIT</span> <span class="mi">10</span>
</code></pre></div>
<h3 id="handling-large-result-sets-with-pagination">Handling Large Result Sets with Pagination</h3>
<p>When query results exceed thousands of rows, the SPARQL endpoint will time out or limit results. Use the <code>paginate_query()</code> function to automatically fetch large datasets in manageable chunks:</p>
<h4 id="basic-pagination">Basic Pagination</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.sparql</span><span class="w"> </span><span class="kn">import</span> <span class="n">paginate_query</span>

<span class="c1"># Fetch all results in batches of 1000</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT ?item ?itemLabel WHERE {</span>
<span class="s2">      ?item wdt:P31 wd:Q5 .</span>
<span class="s2">      SERVICE wikibase:label {</span>
<span class="s2">        bd:serviceParam wikibase:language &quot;en&quot; .</span>
<span class="s2">      }</span>
<span class="s2">    }</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">all_results</span> <span class="o">=</span> <span class="n">paginate_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total results: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_results</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="pagination-with-control">Pagination with Control</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Fetch up to 5000 results, 500 per page</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">paginate_query</span><span class="p">(</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">page_size</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
    <span class="n">max_results</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://query.wikidata.org/sparql&quot;</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;itemLabel&#39;</span><span class="p">])</span>
</code></pre></div>
<h4 id="manual-limitoffset">Manual LIMIT/OFFSET</h4>
<p>If you need to handle pagination directly:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.sparql</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_pagination</span>

<span class="c1"># Add LIMIT 100 OFFSET 0 to query</span>
<span class="n">paginated</span> <span class="o">=</span> <span class="n">add_pagination</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Add without OFFSET</span>
<span class="n">paginated</span> <span class="o">=</span> <span class="n">add_pagination</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</code></pre></div>
<p><strong>Key Parameters:</strong>
- <code>page_size</code> - Results per request (default: 1000, max recommended: 5000)
- <code>max_results</code> - Stop after this many results (default: None, fetch all)
- <code>endpoint</code> - SPARQL endpoint to query (default: Wikidata)</p>
<p><strong>When to Use Pagination:</strong>
- Queries returning thousands of results
- Long-running batch processes
- Building choice lists for profiles
- Mining data for analysis</p>
<h3 id="lookup-cache-and-choice-lists">Lookup Cache and Choice Lists</h3>
<p>For profiles that use SPARQL-backed choice lists (e.g., language codes, allowed property values), use the <code>LookupFetcher</code> to cache results and avoid repeated queries:</p>
<h4 id="setup-and-basic-usage">Setup and Basic Usage</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.spirit_safe</span><span class="w"> </span><span class="kn">import</span> <span class="n">LookupFetcher</span>

<span class="c1"># Initialize fetcher (uses configured SpiritSafe cache directory)</span>
<span class="n">fetcher</span> <span class="o">=</span> <span class="n">LookupFetcher</span><span class="p">()</span>

<span class="c1"># Fetch and cache results</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;</span>
<span class="s2">    PREFIX wdt: &lt;http://www.wikidata.org/prop/direct/&gt;</span>
<span class="s2">    PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>

<span class="s2">    SELECT ?item ?itemLabel</span>
<span class="s2">    WHERE {</span>
<span class="s2">      ?item wdt:P31/wdt:P279* wd:Q34770 ;</span>
<span class="s2">            rdfs:label ?itemLabel .</span>
<span class="s2">      FILTER(LANG(?itemLabel) = &quot;en&quot;)</span>
<span class="s2">    }</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># Fetch with automatic caching and pagination</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">refresh_policy</span><span class="o">=</span><span class="s2">&quot;weekly&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="si">}</span><span class="s2"> languages&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="choice-list-normalization">Choice List Normalization</h4>
<p>For form generation, normalize results to a consistent choice list format:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Fetch and normalize to {id, label, extra_fields} format</span>
<span class="n">choices</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_choice_list</span><span class="p">(</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">id_var</span><span class="o">=</span><span class="s2">&quot;item&quot;</span><span class="p">,</span>
    <span class="n">label_var</span><span class="o">=</span><span class="s2">&quot;itemLabel&quot;</span><span class="p">,</span>
    <span class="n">extra_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;languageCode&quot;</span><span class="p">],</span>
    <span class="n">refresh_policy</span><span class="o">=</span><span class="s2">&quot;weekly&quot;</span>
<span class="p">)</span>

<span class="c1"># Result: [{&quot;id&quot;: &quot;Q123&quot;, &quot;label&quot;: &quot;Navajo&quot;, &quot;languageCode&quot;: &quot;nav&quot;}]</span>
<span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">choice</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">choice</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="refresh-policies">Refresh Policies</h4>
<p>Control how often cached results are validated:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># manual - Check only when explicitly refreshed</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">refresh_policy</span><span class="o">=</span><span class="s2">&quot;manual&quot;</span><span class="p">)</span>

<span class="c1"># daily - Recheck if cache is older than 1 day</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">refresh_policy</span><span class="o">=</span><span class="s2">&quot;daily&quot;</span><span class="p">)</span>

<span class="c1"># weekly - Recheck if cache is older than 1 week</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">refresh_policy</span><span class="o">=</span><span class="s2">&quot;weekly&quot;</span><span class="p">)</span>

<span class="c1"># Force refresh even if cache is fresh</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">refresh_policy</span><span class="o">=</span><span class="s2">&quot;daily&quot;</span><span class="p">,</span> <span class="n">force_refresh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h4 id="cache-management">Cache Management</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.spirit_safe</span><span class="w"> </span><span class="kn">import</span> <span class="n">LookupCache</span>

<span class="n">cache</span> <span class="o">=</span> <span class="n">LookupCache</span><span class="p">()</span>

<span class="c1"># Check if specific query is cached and fresh</span>
<span class="n">is_fresh</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">is_fresh</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">refresh_policy</span><span class="o">=</span><span class="s2">&quot;daily&quot;</span><span class="p">)</span>

<span class="c1"># Manually invalidate a specific query</span>
<span class="n">cache</span><span class="o">.</span><span class="n">invalidate</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

<span class="c1"># Clear all cached queries</span>
<span class="n">cleared_count</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">clear_all</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cleared </span><span class="si">{</span><span class="n">cleared_count</span><span class="si">}</span><span class="s2"> cache files&quot;</span><span class="p">)</span>

<span class="c1"># Custom cache directory</span>
<span class="n">custom_cache</span> <span class="o">=</span> <span class="n">LookupCache</span><span class="p">(</span><span class="n">cache_dir</span><span class="o">=</span><span class="s2">&quot;/path/to/cache&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="profile-integration-example">Profile Integration Example</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># In profiles/YourProfile/profile.yaml (SpiritSafe repo)</span>
<span class="nt">value</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">item</span>
<span class="w">  </span><span class="nt">allowed_items</span><span class="p">:</span>
<span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sparql</span>
<span class="w">    </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;</span>
<span class="w">      </span><span class="no">SELECT ?item ?itemLabel WHERE { ... }</span>
<span class="w">    </span><span class="nt">refresh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weekly</span>
<span class="w">    </span><span class="nt">fallback_items</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Q123</span>
<span class="w">        </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Fallback option</span>
</code></pre></div>
<p>The profile loader currently parses and validates profile YAML only; it does <strong>not</strong> automatically execute SPARQL lookups. Run lookup hydration explicitly (for example, via a dedicated prefetch step or application startup job) to populate cache files.</p>
<h3 id="see-also">See Also</h3>
<ul>
<li><strong>API Reference</strong>: Detailed API documentation at <a href="../api/sparql/">gkc/api/sparql.md</a></li>
<li><strong>SpiritSafe Profiles</strong>: <a href="../profiles/">gkc/profiles.md</a> - Choice list configuration</li>
<li><strong>Wikidata Query Service</strong>: <a href="https://query.wikidata.org/">https://query.wikidata.org/</a></li>
<li><strong>SPARQL Tutorial</strong>: <a href="https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service">https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service</a></li>
</ul>
<hr />
<h2 id="shex-validation-utilities">ShEx Validation Utilities</h2>
<p>The GKC ShEx module provides validation of RDF data against ShEx (Shape Expression) schemas. It's designed primarily for validating Wikidata entities against EntitySchemas but also supports local files and custom schemas.</p>
<h3 id="features_1">Features</h3>
<ul>
<li><strong>Wikidata Integration</strong>: Validate entities against published EntitySchemas</li>
<li><strong>Local File Support</strong>: Validate local RDF files against local ShEx schemas</li>
<li><strong>Mixed Mode</strong>: Use Wikidata entities with local schemas or vice versa</li>
<li><strong>Multiple Input Sources</strong>: QIDs, EIDs, files, or text strings</li>
<li><strong>Detailed Error Reporting</strong>: Clear validation error messages</li>
<li><strong>CLI &amp; Library</strong>: Available as both Python API and command-line tool</li>
</ul>
<h3 id="installation_1">Installation</h3>
<p>ShEx validation is included in GKC with the PyShEx library:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>gkc
</code></pre></div>
<h3 id="quick-start_1">Quick Start</h3>
<h4 id="validate-wikidata-entity">Validate Wikidata Entity</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidator</span>

<span class="c1"># Validate Wikidata item against EntitySchema</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q14708404&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

<span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Validation passed!&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Validation failed&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>
<h4 id="validate-local-files">Validate Local Files</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Validate local RDF against local schema</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">rdf_file</span><span class="o">=</span><span class="s1">&#39;entity.ttl&#39;</span><span class="p">,</span>
    <span class="n">schema_file</span><span class="o">=</span><span class="s1">&#39;schema.shex&#39;</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valid: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="mixed-validation">Mixed Validation</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Validate Wikidata entity against local schema</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q42&#39;</span><span class="p">,</span>
    <span class="n">schema_file</span><span class="o">=</span><span class="s1">&#39;custom_schema.shex&#39;</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div>
<h3 id="common-usage-patterns_1">Common Usage Patterns</h3>
<h4 id="fluent-api-pattern">Fluent API Pattern</h4>
<div class="highlight"><pre><span></span><code><span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q42&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
<span class="n">validator</span><span class="o">.</span><span class="n">load_specification</span><span class="p">()</span>  <span class="c1"># Load schema</span>
<span class="n">validator</span><span class="o">.</span><span class="n">load_rdf</span><span class="p">()</span>             <span class="c1"># Load RDF data</span>
<span class="n">validator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>             <span class="c1"># Perform validation</span>

<span class="k">if</span> <span class="n">validator</span><span class="o">.</span><span class="n">passes_inspection</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Valid!&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="using-text-strings">Using Text Strings</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Validate RDF text against schema text</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">rdf_text</span><span class="o">=</span><span class="n">my_rdf_turtle</span><span class="p">,</span>
    <span class="n">schema_text</span><span class="o">=</span><span class="n">my_shex_schema</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div>
<h4 id="error-handling_1">Error Handling</h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">gkc.shex</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShexValidationError</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q42&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
    <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">validator</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Validation failed:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">validator</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="n">ShexValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="cli-usage">CLI Usage</h3>
<p>The ShEx validator is also available through the GKC command-line interface:</p>
<h4 id="validate-wikidata-entity_1">Validate Wikidata Entity</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Basic validation</span>
gkc<span class="w"> </span>shex<span class="w"> </span>validate<span class="w"> </span>--qid<span class="w"> </span>Q14708404<span class="w"> </span>--eid<span class="w"> </span>E502
</code></pre></div>
<h4 id="validate-local-files_1">Validate Local Files</h4>
<div class="highlight"><pre><span></span><code>gkc<span class="w"> </span>shex<span class="w"> </span>validate<span class="w"> </span>--rdf-file<span class="w"> </span>entity.ttl<span class="w"> </span>--schema-file<span class="w"> </span>schema.shex
</code></pre></div>
<h4 id="mixed-sources">Mixed Sources</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Wikidata entity with local schema</span>
gkc<span class="w"> </span>shex<span class="w"> </span>validate<span class="w"> </span>--qid<span class="w"> </span>Q14708404<span class="w"> </span>--schema-file<span class="w"> </span>custom_schema.shex

<span class="c1"># Local RDF with Wikidata EntitySchema</span>
gkc<span class="w"> </span>shex<span class="w"> </span>validate<span class="w"> </span>--rdf-file<span class="w"> </span>entity.ttl<span class="w"> </span>--eid<span class="w"> </span>E502
</code></pre></div>
<h4 id="custom-user-agent">Custom User Agent</h4>
<div class="highlight"><pre><span></span><code>gkc<span class="w"> </span>shex<span class="w"> </span>validate<span class="w"> </span>--qid<span class="w"> </span>Q42<span class="w"> </span>--eid<span class="w"> </span>E502<span class="w"> </span>--user-agent<span class="w"> </span><span class="s2">&quot;MyBot/1.0&quot;</span>
</code></pre></div>
<h3 id="understanding-validation-results">Understanding Validation Results</h3>
<h4 id="successful-validation">Successful Validation</h4>
<p>When validation succeeds, <code>is_valid()</code> returns <code>True</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q14708404&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
<span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

<span class="k">if</span> <span class="n">validator</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entity conforms to schema&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="failed-validation">Failed Validation</h4>
<p>When validation fails, inspect the <code>results</code> attribute for details:</p>
<div class="highlight"><pre><span></span><code><span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="s1">&#39;Q736809&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span><span class="p">)</span>
<span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">validator</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">validator</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Common error patterns:
- <code>"not in value set"</code> - Property value doesn't match allowed values
- <code>"does not match"</code> - Data type or format mismatch
- <code>"Constraint violation"</code> - Cardinality or required property missing</p>
<h3 id="when-to-use-shex-validation">When to Use ShEx Validation</h3>
<p><strong>Use ShEx validation when you need to:</strong></p>
<ul>
<li>Verify Wikidata items conform to a specific EntitySchema</li>
<li>Validate data quality before uploading to Wikidata</li>
<li>Test EntitySchema definitions with sample data</li>
<li>Ensure consistency across a set of items</li>
<li>Develop and debug EntitySchemas</li>
</ul>
<p><strong>Example: Pre-upload Quality Check</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Before uploading to Wikidata</span>
<span class="n">validator</span> <span class="o">=</span> <span class="n">ShexValidator</span><span class="p">(</span>
    <span class="n">rdf_text</span><span class="o">=</span><span class="n">generated_turtle_data</span><span class="p">,</span>
    <span class="n">eid</span><span class="o">=</span><span class="s1">&#39;E502&#39;</span>  <span class="c1"># Target EntitySchema</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">validator</span><span class="o">.</span><span class="n">check</span><span class="p">()</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
    <span class="c1"># Safe to upload</span>
    <span class="n">upload_to_wikidata</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Fix validation errors first</span>
    <span class="n">log_errors</span><span class="p">(</span><span class="n">validator</span><span class="o">.</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>
<h3 id="see-also_1">See Also</h3>
<ul>
<li><strong>API Reference</strong>: Detailed API documentation at <a href="../api/shex/">gkc/api/shex.md</a></li>
<li><strong>CLI Reference</strong>: Command-line usage at <a href="../cli/shex/">gkc/cli/shex.md</a></li>
<li><strong>EntitySchemas on Wikidata</strong>: <a href="https://www.wikidata.org/wiki/Wikidata:WikiProject_Schemas">https://www.wikidata.org/wiki/Wikidata:WikiProject_Schemas</a></li>
<li><strong>ShEx Specification</strong>: <a href="http://shex.io/">http://shex.io/</a></li>
</ul>
<hr />
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><strong>Wikidata Query Service</strong>: <a href="https://query.wikidata.org/">https://query.wikidata.org/</a></li>
<li><strong>Wikidata EntitySchemas</strong>: <a href="https://www.wikidata.org/wiki/Wikidata:EntitySchema">https://www.wikidata.org/wiki/Wikidata:EntitySchema</a></li>
<li><strong>GKC GitHub Repository</strong>: <a href="https://github.com/skybristol/gkc">https://github.com/skybristol/gkc</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.sections", "navigation.top", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../javascripts/mermaid-init.js"></script>
      
    
  </body>
</html>